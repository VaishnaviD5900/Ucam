<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>docketrun-web-app-new documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">docketrun-web-app-new documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li>Interfaces</li>
  <li
  >
  traficCount</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/Features/traffic-count/traffic-count.component.ts</code>
        </p>




        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#camera_id" 
>
                                            camera_id
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#cameraid" 
>
                                            cameraid
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Date" 
>
                                            Date
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Device_name" 
>
                                            Device_name
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#entry_count" 
>
                                            entry_count
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Entry_count" 
>
                                            Entry_count
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#exit_count" 
>
                                            exit_count
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Exit_count" 
>
                                            Exit_count
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Exit_time" 
>
                                            Exit_time
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#id" 
>
                                            id
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#Time" 
>
                                            Time
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#time_stamp" 
>
                                            time_stamp
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#timestamp" 
>
                                            timestamp
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="camera_id"></a>
                                        <span class="name "><b>camera_id</b>
                                            <a href="#camera_id">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>camera_id:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="cameraid"></a>
                                        <span class="name "><b>cameraid</b>
                                            <a href="#cameraid">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>cameraid:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Date"></a>
                                        <span class="name "><b>Date</b>
                                            <a href="#Date">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Date:     <code>Date | string</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>Date | string</code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Device_name"></a>
                                        <span class="name "><b>Device_name</b>
                                            <a href="#Device_name">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Device_name:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="entry_count"></a>
                                        <span class="name "><b>entry_count</b>
                                            <a href="#entry_count">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>entry_count:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Entry_count"></a>
                                        <span class="name "><b>Entry_count</b>
                                            <a href="#Entry_count">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Entry_count:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="exit_count"></a>
                                        <span class="name "><b>exit_count</b>
                                            <a href="#exit_count">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>exit_count:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Exit_count"></a>
                                        <span class="name "><b>Exit_count</b>
                                            <a href="#Exit_count">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Exit_count:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Exit_time"></a>
                                        <span class="name "><b>Exit_time</b>
                                            <a href="#Exit_time">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Exit_time:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="id"></a>
                                        <span class="name "><b>id</b>
                                            <a href="#id">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>id:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="Time"></a>
                                        <span class="name "><b>Time</b>
                                            <a href="#Time">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>Time:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="time_stamp"></a>
                                        <span class="name "><b>time_stamp</b>
                                            <a href="#time_stamp">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>time_stamp:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="timestamp"></a>
                                        <span class="name "><b>timestamp</b>
                                            <a href="#timestamp">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>timestamp:     <code>Date | string | null</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>Date | string | null</code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { Component, ElementRef, OnInit, ViewChild } from &#x27;@angular/core&#x27;;
import { FormControl, Validators } from &#x27;@angular/forms&#x27;;
import { ModalDismissReasons, NgbDate, NgbModal } from &#x27;@ng-bootstrap/ng-bootstrap&#x27;;
import { Observable, of } from &#x27;rxjs&#x27;;
import { startWith, switchMap } from &#x27;rxjs/operators&#x27;;
import { ExcelsheetService } from &#x27;src/app/services/excelsheet.service&#x27;;
import { PdfService } from &#x27;src/app/services/pdf.service&#x27;;
import { WebServerService } from &#x27;src/app/services/web-server.service&#x27;;
import { Chart } from &#x27;chart.js&#x27;
import { ChartItem } from &#x27;src/app/Models/ChartItem&#x27;;
import { chartItem } from &#x27;./chartModel&#x27;;
import { DatePipe } from &#x27;@angular/common&#x27;;
import { barChartData, lineChartData } from &#x27;./trafficcount&#x27;;
import &#x27;chartjs-plugin-datalabels&#x27;
import { MatSnackBar } from &#x27;@angular/material/snack-bar&#x27;;
//import ChartDataLabels from &#x27;chartsjs-plugin-data-labels&#x27;;
// import * as Chart from &#x27;chart.js&#x27;;

export interface traficCount {

  Date?: Date | string,
  Device_name?: string
  timestamp?: Date | string | null,
  time_stamp?: Date,
  entry_count?: number,
  Entry_count?: number,
  exit_count?: number,
  Exit_count?: number,

  Time?: string,
  Exit_time?: string
  cameraid?: string,
  camera_id?: string,
  id?: number
}

var data: any[] &#x3D; []

@Component({
  selector: &#x27;app-traffic-count&#x27;,
  templateUrl: &#x27;./traffic-count.component.html&#x27;,
  styleUrls: [&#x27;./traffic-count.component.css&#x27;]
})
export class TrafficCountComponent implements OnInit {
  entryExitChart: chartItem &#x3D; new chartItem()
  entryChart: chartItem &#x3D; new chartItem()
  barchart: barChartData &#x3D; new barChartData()
  //lineChart:lineChartData&#x3D;new lineChartData()
  currentData: traficCount &#x3D; {}
  from!: NgbDate
  To!: NgbDate
  chart!: Chart
  data: traficCount[] &#x3D; []
  zoom &#x3D; 100
  traficCountData: Observable&lt;traficCount[]&gt; &#x3D; of([])
  imageUrl: string&#x3D;&#x27;&#x27;
  imgWidth: number &#x3D; 400
  imgheight: number &#x3D; 300
  closeResult: string&#x3D;&#x27;&#x27;
  tempdata: any[] &#x3D; [];
  page: number &#x3D; 1
  pageSize: number &#x3D; 4
  FD!: string
  TD!: string
  collectionSize!: number
  total: Observable&lt;number&gt; &#x3D; of(0)
  TCData: Observable&lt;traficCount[]&gt; &#x3D; of([])
  loading: boolean &#x3D; false
  filterOut: FormControl &#x3D; new FormControl()
  closeModal: any
  dataForExcel: any[] &#x3D; []
  images: any[] &#x3D; []
  ExcelData: any
  PdfData: any
  temp: traficCount &#x3D; {}
  pdfLoader: boolean &#x3D; false
  excelLoader: boolean &#x3D; false
  violLength: number &#x3D; 0
  updatedLen: number &#x3D; 0
  violdata: any[] &#x3D; [];
  currentViol!: traficCount
  dataForPdf!: any[]
  show1: number &#x3D; 15
  show2: number &#x3D; 30
  show3: number &#x3D; 60
  fromDate &#x3D; new FormControl(Validators.required)
  toDate &#x3D; new FormControl(Validators.required)
  updateTO!: number
  isdatewise: boolean &#x3D; false
  API: any
  interval: any
  BarChartData: barChartData &#x3D; new barChartData()
  LineChartData: lineChartData &#x3D; new barChartData()
  totalEntry: number &#x3D; 0
  totalExit: number &#x3D; 0
  FDate!: string
  TDate!: string
  loader2: boolean &#x3D; false;
  public barCanvas!: CanvasRenderingContext2D
  public lineCanvas!: CanvasRenderingContext2D
  @ViewChild(&#x27;barChart&#x27;)
  barChart!: ElementRef&lt;HTMLCanvasElement&gt;;
  @ViewChild(&#x27;lineChart&#x27;)
  lineChart!: ElementRef&lt;HTMLCanvasElement&gt;;
//   exportAsconfig:ExportAsConfig&#x3D;{
//     type:&#x27;png&#x27;,
//     elementIdOrContent:&#x27;barChart&#x27;
//   };
// exportAsconfig2:ExportAsConfig&#x3D;{
//   type:&#x27;png&#x27;,
//   elementIdOrContent:&#x27;linechart&#x27;
// }

  // @ViewChild(&#x27;dangerAlert&#x27;) Violation: TemplateRef&lt;any&gt;;



  constructor(private modalService: NgbModal, private http: HttpClient, public excelSheet: ExcelsheetService, public pdfService: PdfService, private webServer: WebServerService, private datepipe: DatePipe,private snackbar:MatSnackBar) {
    this.API &#x3D; webServer.IP
    this.chartinit()
    //---------------filter-----------------------
    this.filterOut.valueChanges.pipe((startWith(&#x27;&#x27;),
      switchMap((text) &#x3D;&gt; this.matches(text)))).subscribe(result &#x3D;&gt; 
        {
      this.tempdata &#x3D; result
      this.TCData &#x3D; of(result)
      this.sliceVD()
      }
    )

  }

  ngOnInit(): void {
    var yd &#x3D; new Date()
    console.log(yd)
    var fromDate &#x3D; this.datepipe.transform(yd, &quot;yyyy-MM-dd&quot;)
    this.FDate !&#x3D; fromDate
    var toDate &#x3D; this.datepipe.transform(yd, &quot;yyyy-MM-dd&quot;)
    console.log(fromDate)
    //  fromDate&#x3D;fromDate+&#x27; &#x27;+&#x27;00:00:00&#x27;
    // toDate&#x3D;toDate+&#x27; &#x27;+&#x27;23:58:00&#x27;
    this.webServer.TCDatewise(toDate, fromDate).subscribe((response: any) &#x3D;&gt; {
      if (response.success) {
        this.loading&#x3D;false
        console.log(response.message)
        if (response.message.length &gt; 0) {
            for (let i &#x3D; 0; i &lt; response.message.length; i++) {
            var location &#x3D; &quot;docketrun&quot;
            var temp &#x3D; response.message[i];
            this.totalEntry &#x3D; this.totalEntry + (temp.Entry_count)
            this.totalExit &#x3D; this.totalExit + (temp.Exit_count)
            this.currentData.entry_count &#x3D; this.totalEntry
            this.currentData.exit_count &#x3D; this.totalExit
            this.currentData.Device_name &#x3D; response.message[i].Device_name
            // if (fromDate &#x3D;&#x3D;&#x3D; toDate) {
            //   var date &#x3D; fromDate
            // }
            // else {
            //   date &#x3D; fromDate + &#x27;-&#x27; + toDate
            // }
            // console.log(date)
           // this.currentData.timestamp &#x3D; date
            this.FDate!&#x3D;fromDate
            this.TDate&#x3D;&#x27;&#x27;
            var c &#x3D; this.datepipe.transform(response.message[i].Date, &#x27;dd/MM/yyyy&#x27;) + &quot; &quot; + response.message[i].Time;
            var timestamp &#x3D; c
            if(temp.Entry_count!&#x3D;&#x3D;0 || temp.Exit_count!&#x3D;&#x3D;0){
            this.BarChartData.entry_counts.push(temp.Entry_count)
            this.LineChartData.entry_counts.push(temp.Entry_count)

            this.BarChartData.exit_counts.push(temp.Exit_count)
            this.BarChartData.labels.push(timestamp)
            this.LineChartData.labels.push(timestamp)
            }
            this.Chart()
            if (this.tempdata.length &gt; 30) {
              if (this.pageSize &lt; 30) {
                this.pageSize &#x3D; 30
                this.show1 &#x3D; 15
                this.show2 &#x3D; 30
                this.show3 &#x3D; 40
              }
              else {
                this.pageSize &#x3D; this.pageSize
              }
            }
            if (this.tempdata.length &gt;&#x3D; 400) {
              if (this.pageSize &lt; 60) {
                this.pageSize &#x3D; 60
                this.show1 &#x3D; 50
                this.show2 &#x3D; 60
                this.show3 &#x3D; 70
              }
              else {
                this.pageSize &#x3D; this.pageSize
              }
            }
            if (this.tempdata.length &gt;&#x3D; 1000) {
              if (this.pageSize &lt; 100) {
                this.pageSize &#x3D; 100
                this.show1 &#x3D; 100
                this.show2 &#x3D; 150
                this.show3 &#x3D; 200
              }
              else {
                this.pageSize &#x3D; this.pageSize
              }
            }


            if (this.tempdata.length &gt;&#x3D; 2000) {
              if (this.pageSize &lt; 150) {
                this.pageSize &#x3D; 200
                this.show1 &#x3D; 200
                this.show2 &#x3D; 250
                this.show3 &#x3D; 300
              }
              else {
                this.pageSize &#x3D; this.pageSize
              }
            }
            if (this.tempdata.length &gt;&#x3D; 3000) {
              if (this.pageSize &lt; 300) {
                this.pageSize &#x3D; 300
                this.show1 &#x3D; 300
                this.show2 &#x3D; 350
                this.show3 &#x3D; 400
              }
              else {
                this.pageSize &#x3D; this.pageSize
              }
            }
            data &#x3D; response.message
            this.tempdata &#x3D; response.message
            this.total &#x3D; of(this.tempdata.length)
            this.isdatewise&#x3D;true
            this.sliceVD()

            this.loading &#x3D; false
            console.log(this.tempdata)
          }
         }
        console.log(this.currentData)
      }
      console.log(this.BarChartData)
      console.log(this.LineChartData)
    },
    err&#x3D;&gt;{this.loading&#x3D;false,
    this.notification(&#x27;Error while fetching the data&#x27;,&#x27;retry&#x27;)}
    )
 this.liveData()
  }


  //modal to view the image
  openImage(imageUrl: string, modal: any) {

    this.imageUrl &#x3D; this.API + &#x27;/image/&#x27; + imageUrl
    // console.log(this.imageUrl)
    this.modalService.open(modal, { size: &#x27;lg&#x27;, windowClass: &#x27;custome&#x27;, centered: true }).result.then((result) &#x3D;&gt; {
      this.closeResult &#x3D; &#x60;Closed with: ${result}&#x60;;
    }, (reason) &#x3D;&gt; {
      this.closeResult &#x3D; &#x60;Dismissed ${this.getDismissReason(reason)}&#x60;;
    });

  }

//------------function which occurs when the modal closes--------
  private getDismissReason(reason: any): string {
    if (reason &#x3D;&#x3D;&#x3D; ModalDismissReasons.ESC) {
      this.zoom &#x3D; 100
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300

      return &#x27;by pressing ESC&#x27;;
    } else if (reason &#x3D;&#x3D;&#x3D; ModalDismissReasons.BACKDROP_CLICK) {
      this.zoom &#x3D; 100
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300
      return &#x27;by clicking on a backdrop&#x27;;
    } else {
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300
      this.zoom &#x3D; 100
      return &#x60;with: ${reason}&#x60;;
    }

  }

//---------------------function for filtering the data----------
  matches(term: string): Observable&lt;any[]&gt; {
    var resultVD &#x3D; data.filter((viol:traficCount) &#x3D;&gt; {
      &lt;any&gt;viol.Entry_count
      return viol.Entry_count?.toString().includes(term)
    })
    this.tempdata &#x3D; resultVD
    const length &#x3D; resultVD.length;
    this.sliceVD()
    return of(resultVD);
  }


  sliceVD()
   {    this.total &#x3D; of(this.tempdata.length)
    this.TCData &#x3D; of((this.tempdata.map((div: any, SINo: number) &#x3D;&gt; ({ id: SINo + 1, ...div })).slice((this.page - 1) * this.pageSize, (this.page - 1) * this.pageSize + this.pageSize)))
  }


  Submit() {
    clearInterval(this.interval)
    this.FDate &#x3D; &#x27;&#x27;
    this.TDate &#x3D; &#x27;&#x27;
    this.totalEntry &#x3D; 0
    this.totalExit &#x3D; 0
    this.loading &#x3D; true
    this.tempdata &#x3D; []
    var fromDate &#x3D; this.dateTransform(this.fromDate.value)
    var toDate &#x3D; this.dateTransform(this.toDate.value)
    this.webServer.TCDatewise(fromDate, toDate).subscribe((response: any) &#x3D;&gt; {
     // console.log(response)
    if (response.success) {
        console.log(response.message)
        if (response.message.length &gt; 0) {
          this.LineChartData.labels &#x3D; []

          this.BarChartData.labels &#x3D; []
          this.BarChartData.exit_counts &#x3D; []
          this.BarChartData.entry_counts &#x3D; []
          this.LineChartData.entry_counts &#x3D; []
          this.tempdata &#x3D; response.message
          if (fromDate &#x3D;&#x3D;&#x3D; toDate) {
            this.FDate !&#x3D; fromDate
            this.TDate &#x3D; &#x27;&#x27;
          }
          else {
            this.FDate !&#x3D; fromDate
            this.TDate !&#x3D; toDate
          }

          for (let i &#x3D; 0; i &lt; response.message.length; i++) {

            var location &#x3D; &quot;docketrun&quot;
            var temp &#x3D; response.message[i];
            this.totalEntry &#x3D; this.totalEntry + (temp.Entry_count)
            this.totalExit &#x3D; this.totalExit + (temp.Exit_count)
            this.currentData.entry_count &#x3D; this.totalEntry
            this.currentData.exit_count &#x3D; this.totalExit
            this.currentData.Device_name&#x3D;temp.Device_name
            var fromD &#x3D; this.dateTransform(this.fromDate.value)
            var toD &#x3D; this.dateTransform(this.toDate.value)
            // console.log(date)
            // response.message[i].Date&#x3D;this.dateTransform(response.message[i].Date)
            
            //console.log(date)
            //this.currentData.timestamp&#x3D;date
            var c &#x3D; this.datepipe.transform(response.message[i].Date, &#x27;dd/MM/yyyy&#x27;) + &quot; &quot; + response.message[i].Time;
            var timestamp &#x3D; c
            //console.log(timestamp)


            
            //console.log(timestamp)
            if(temp.Entry_count!&#x3D;&#x3D;0 || temp.Exit_count!&#x3D;&#x3D;0){
            this.BarChartData.entry_counts.push(temp.Entry_count)
            this.LineChartData.entry_counts.push(temp.Entry_count)

            this.BarChartData.exit_counts.push(temp.Exit_count)
            this.BarChartData.labels.push(timestamp)
            this.LineChartData.labels.push(timestamp)
            }
            this.Chart()
          }
      }

        
      }
     
     if (this.tempdata.length &gt; 30) {
        if (this.pageSize &lt; 30) {
          this.pageSize &#x3D; 30
          this.show1 &#x3D; 15
          this.show2 &#x3D; 30
          this.show3 &#x3D; 40
        }
        else {
          this.pageSize &#x3D; this.pageSize
        }
      }
      if (this.tempdata.length &gt;&#x3D; 400) {
        if (this.pageSize &lt; 60) {
          this.pageSize &#x3D; 60
          this.show1 &#x3D; 50
          this.show2 &#x3D; 60
          this.show3 &#x3D; 70
        }
        else {
          this.pageSize &#x3D; this.pageSize
        }
      }
      if (this.tempdata.length &gt;&#x3D; 1000) {
        if (this.pageSize &lt; 100) {
          this.pageSize &#x3D; 100
          this.show1 &#x3D; 100
          this.show2 &#x3D; 150
          this.show3 &#x3D; 200
        }
        else {
          this.pageSize &#x3D; this.pageSize
        }
      }


      if (this.tempdata.length &gt;&#x3D; 2000) {
        if (this.pageSize &lt; 150) {
          this.pageSize &#x3D; 200
          this.show1 &#x3D; 200
          this.show2 &#x3D; 250
          this.show3 &#x3D; 300
        }
        else {
          this.pageSize &#x3D; this.pageSize
        }
      }
      if (this.tempdata.length &gt;&#x3D; 3000) {
        if (this.pageSize &lt; 300) {
          this.pageSize &#x3D; 300
          this.show1 &#x3D; 300
          this.show2 &#x3D; 350
          this.show3 &#x3D; 400
        }
        else {
          this.pageSize &#x3D; this.pageSize
        }
      }
      data &#x3D; response.message
      this.tempdata &#x3D; response.message
      this.total &#x3D; of(this.tempdata.length)
      // this.isdatewise&#x3D;true
      this.sliceVD()

      this.loading &#x3D; false
     // console.log(this.tempdata)


      // (error)&#x3D;&gt;{
      //   console.log(error.message)
      // this.loading&#x3D;false
      // }
    },
    
    err&#x3D;&gt;{this.loading&#x3D;false,
      alert(err.message)
    this.notification(&#x27;Error while fetching the data&#x27;,&#x27;retry&#x27;)})


  }

  BackToToday(){
    this.loader2&#x3D;true

  this.liveData()
  }

  //-------function to download the excel-----------------------------
  downloadExcel() {

   var tempCanvas &#x3D; this.barChart.nativeElement.toDataURL(&#x27;image/png&#x27;, 1.0)
    console.log(tempCanvas)
    var tempLineCanvas &#x3D; this.lineChart.nativeElement.toDataURL(&#x27;image/png&#x27;,1.0)
    // var Ddata&#x3D;da
    this.excelSheet.excelLoader &#x3D; true
    this.images &#x3D; []
    this.dataForExcel &#x3D; []
    data.forEach((each: any) &#x3D;&gt; {
    this.dataForExcel.push([each.Date, each.Time, each.Entry_count, each.Exit_count])
   })
  setTimeout(() &#x3D;&gt; {
    this.ExcelData &#x3D; {
      title: &#x27;Traffic Count Data&#x27;,
      data: this.dataForExcel,
      headers: [&quot;Date&quot;, &quot;Time&quot;, &quot;Entry  Count&quot;, &quot;Exit Count&quot;],
      barImage: tempCanvas,
      lineChartImage: tempLineCanvas,
     
    }
    //console.log(images.length)
    this.excelSheet.exportExcel(this.ExcelData)
  }, 10000);
    //this.excelLoader &#x3D; false
  }


//------------------download pdf------------------------------
  downloadPdf() {
    var tempCanvas &#x3D; this.barChart.nativeElement.toDataURL(&#x27;image/png&#x27;, 1.0)

    var tempLineCanvas &#x3D; this.lineChart.nativeElement.toDataURL(&#x27;image/png&#x27;, 1.0)
    // var Ddata&#x3D;this.tempdata
    // console.log(Ddata)
    this.dataForPdf &#x3D; []
    this.pdfService.pdfLoader &#x3D; true
    var timeSpentInZone: any[] &#x3D; []
    this.images &#x3D; []
    data.forEach((each: any) &#x3D;&gt; {
      this.dataForPdf.push([each.Date, each.Time, each.Entry_count, each.Exit_count])
      // this.images.push(each.imagename)
      // timeSpentInZone.push(each.total_time_spent_in_zone)
    })
    
 setTimeout(() &#x3D;&gt; {
  this.PdfData &#x3D; {
      title: &#x27;Traffic Count Data&#x27;,
      data: this.dataForPdf,
      headers: [&quot;Date&quot;, &quot;time&quot;, &quot;Entry Count&quot;, &quot;Exit Count&quot;],
      // TDMCount: this.DM_TDM_Count,
      // testDriveCount: this.test_drive,
      
      barImage: tempCanvas,
      lineChartImage: tempLineCanvas,
      timeSpentInZone: timeSpentInZone
      // timespentzone:TSZString
    }
  this.pdfService.createPdf(this.PdfData)
  this.pdfLoader &#x3D; false
  }, 10000);
 }

 //---------method to convert image to base64------------
  toBase64(url:any, callback:any) {
    var request &#x3D; new XMLHttpRequest()
    request.onload &#x3D; function () {
      var reader &#x3D; new FileReader()
      reader.onloadend &#x3D; function () {
        callback(reader.result)
      }
      reader.readAsDataURL(request.response)

    }
    request.open(&#x27;GET&#x27;, url)
    request.responseType &#x3D; &#x27;blob&#x27;
    request.send()

  }


  ///------------------------------------------------------------
  chartinit() {
    this.entryExitChart.Options &#x3D; {
      responsive: true,

      scales: {
        yAxes: [{
           ticks: {
            min: 0,
            beginAtZero: false
                }
              }],
          xAxes: [{
          gridLines: {
            display: false
           }
           }]  
         },
      plugins: {
        datalabels: {
          anchor: &#x27;end&#x27;,
          align: &#x27;end&#x27;
        }
      },
    }
    this.entryExitChart.type &#x3D; &quot;bar&quot;
    this.entryExitChart.labels &#x3D; []
    this.entryExitChart.plugins &#x3D; []
    this.entryExitChart.arrayDataSet &#x3D; [{
      data: [], label: &#x27;Entry&#x27;, backgroundColor: &quot;rgba(27, 163, 185, 1)&quot;, hoverBackgroundColor: &quot;rgba(27, 163, 185, 1)&quot;,borderColor:&quot;rgba(27, 163, 185, 1)&quot;
    },
    { data: [], label: &#x27;Exit&#x27;, backgroundColor: &quot;rgba(255, 199, 80, 1)&quot;, hoverBackgroundColor: &quot;rgba(255, 199, 80, 1)&quot;,borderColor: &quot;rgba(255, 199, 80, 1)&quot; },
    ]
    this.entryChart.Options &#x3D; { responsive: true,
      scales: {
        yAxes: [{
           ticks: {
            min: 0,
            beginAtZero: false
                }
              }],
          xAxes: [{
          gridLines: {
            display: false
           }
           }]  
         },
      plugins: {
        datalabels: {
          anchor: &#x27;start&#x27;,
          align: &#x27;top&#x27;
        }
      }}
    this.entryChart.type &#x3D; &#x27;line&#x27;
    this.entryChart.labels &#x3D; []
    this.entryChart.arrayDataSet &#x3D; [{
      data: [], label: &#x27;Entry&#x27;, borderColor: &quot;rgba(27, 163, 185, 1)&quot;, backgroundColor: &quot;rgba(100, 206, 211, 1)&quot;, fill: false, pointBackgroundColor: &quot;rgba(255, 199, 80, 1)&quot;, lineTension: 0
    }]

  }
Chart() {
    this.entryExitChart.labels &#x3D; this.BarChartData.labels
    this.entryExitChart.arrayDataSet[0].data &#x3D; this.BarChartData.entry_counts
    this.entryExitChart.arrayDataSet[1].data &#x3D; this.BarChartData.exit_counts
    // this.entryExitChart.arrayDataSet[2].data&#x3D;this.BarChartData.exit_counts

    this.entryChart.arrayDataSet[0].data &#x3D; this.LineChartData.entry_counts
    this.entryExitChart.arrayDataSet[0].label &#x3D; &quot;Entry&quot;
    this.entryExitChart.arrayDataSet[1].label &#x3D; &quot;Exit&quot;


    this.entryChart.labels &#x3D; this.LineChartData.labels
    console.log(this.entryExitChart)
    console.log(this.entryExitChart)

  }
 dateTransform(date: any) {
    const temp &#x3D; new Date(date.year, date.month - 1, date.day)
    console.log(temp)
    const FD &#x3D; this.datepipe.transform(temp, &#x27;yyyy-MM-dd&#x27;)


    return FD
  }

  //----------------snack bar to show the status---------------------------------------------
  notification(message: string, action?: string) {
     console.log(&#x27;snackbar&#x27;)
    this.snackbar.open(message, action ? action : &#x27;&#x27;, ({
      duration: 4000, panelClass: [&#x27;error&#x27;],
      horizontalPosition: &#x27;end&#x27;,
      verticalPosition: &#x27;bottom&#x27;,
    })
    )
  }
 
  liveData(){
    this.interval &#x3D; setInterval(() &#x3D;&gt; {
    this.webServer.liveDataTC().subscribe((response:any)&#x3D;&gt;{
      console.log(response)
      if (response.success) {
      this.loader2&#x3D;false
       this.isdatewise&#x3D;false
      console.log(response)
      if (response.message.length &gt; 0) {
        this.LineChartData.labels &#x3D; []

        this.BarChartData.labels &#x3D; []
        this.BarChartData.exit_counts &#x3D; []
        this.BarChartData.entry_counts &#x3D; []
        this.LineChartData.entry_counts &#x3D; []
        this.tempdata &#x3D; response.message
        // if (fromDate &#x3D;&#x3D;&#x3D; toDate) {
        //   this.FDate &#x3D; fromDate
        //   this.TDate &#x3D; &#x27;&#x27;
        // }
        // else {
        //   this.FDate &#x3D; fromDate
        //   this.TDate &#x3D; toDate
        // }

        for (let i &#x3D; 0; i &lt; response.message.length; i++) {

          var location &#x3D; &quot;docketrun&quot;
          var temp &#x3D; response.message[i];
          this.totalEntry &#x3D; this.totalEntry + (temp.Entry_count)
          this.totalExit &#x3D; this.totalExit + (temp.Exit_count)
          this.currentData.entry_count &#x3D; this.totalEntry
          this.currentData.exit_count &#x3D; this.totalExit
          this.currentData.Device_name&#x3D;temp.Device_name
          var fromD &#x3D; this.dateTransform(this.fromDate.value)
          var toD &#x3D; this.dateTransform(this.toDate.value)
          // console.log(date)
          // response.message[i].Date&#x3D;this.dateTransform(response.message[i].Date)
          
          //console.log(date)
          //this.currentData.timestamp&#x3D;date
          var c &#x3D; this.datepipe.transform(response.message[i].Date, &#x27;dd/MM/yyyy&#x27;) + &quot; &quot; + response.message[i].Time;
          var timestamp &#x3D; c
          //console.log(timestamp)


          
          //console.log(timestamp)
          if(temp.Entry_count!&#x3D;&#x3D;0 || temp.Exit_count!&#x3D;&#x3D;0){
          this.BarChartData.entry_counts.push(temp.Entry_count)
          this.LineChartData.entry_counts.push(temp.Entry_count)

          this.BarChartData.exit_counts.push(temp.Exit_count)
          this.BarChartData.labels.push(timestamp)
          this.LineChartData.labels.push(timestamp)
          }
          this.Chart()
        }


      }

      //console.log(this.currentData)
    }
    //console.log(this.BarChartData)
    //console.log(this.LineChartData)

    //this.tempdata &#x3D; Response.message

    if (this.tempdata.length &gt; 30) {
      if (this.pageSize &lt; 30) {
        this.pageSize &#x3D; 30
        this.show1 &#x3D; 15
        this.show2 &#x3D; 30
        this.show3 &#x3D; 40
      }
      else {
        this.pageSize &#x3D; this.pageSize
      }
    }
    if (this.tempdata.length &gt;&#x3D; 400) {
      if (this.pageSize &lt; 60) {
        this.pageSize &#x3D; 60
        this.show1 &#x3D; 50
        this.show2 &#x3D; 60
        this.show3 &#x3D; 70
      }
      else {
        this.pageSize &#x3D; this.pageSize
      }
    }
    if (this.tempdata.length &gt;&#x3D; 1000) {
      if (this.pageSize &lt; 100) {
        this.pageSize &#x3D; 100
        this.show1 &#x3D; 100
        this.show2 &#x3D; 150
        this.show3 &#x3D; 200
      }
      else {
        this.pageSize &#x3D; this.pageSize
      }
    }


    if (this.tempdata.length &gt;&#x3D; 2000) {
      if (this.pageSize &lt; 150) {
        this.pageSize &#x3D; 200
        this.show1 &#x3D; 200
        this.show2 &#x3D; 250
        this.show3 &#x3D; 300
      }
      else {
        this.pageSize &#x3D; this.pageSize
      }
    }
    if (this.tempdata.length &gt;&#x3D; 3000) {
      if (this.pageSize &lt; 300) {
        this.pageSize &#x3D; 300
        this.show1 &#x3D; 300
        this.show2 &#x3D; 350
        this.show3 &#x3D; 400
      }
      else {
        this.pageSize &#x3D; this.pageSize
      }
    }
    data &#x3D; response.message
    this.tempdata &#x3D; response.message
    this.total &#x3D; of(this.tempdata.length)
    // this.isdatewise&#x3D;true
    this.sliceVD()

    this.loading &#x3D; false
   // console.log(this.tempdata)


    // (error)&#x3D;&gt;{
    //   console.log(error.message)
    // this.loading&#x3D;false
    // }
  },
  
  err&#x3D;&gt;{this.loading&#x3D;false,
    alert(err.message)
  this.notification(&#x27;Error while fetching the data&#x27;,&#x27;retry&#x27;)})

  },300000)
}

ngOnDestroy() {
  this.modalService.dismissAll()
  clearInterval(this.closeModal)
}

}</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'traficCount.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
