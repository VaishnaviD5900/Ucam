<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>docketrun-web-app-new documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">docketrun-web-app-new documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li>Interfaces</li>
  <li
  >
  violation</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/Features/perimeter/perimeter.component.ts</code>
        </p>




        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#cameraid" 
>
                                            cameraid
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#date" 
>
                                            date
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#detected_timestamp" 
>
                                            detected_timestamp
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#exit_timestamp" 
>
                                            exit_timestamp
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#imagename" 
>
                                            imagename
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#roi_violation_name" 
>
                                            roi_violation_name
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="cameraid"></a>
                                        <span class="name "><b>cameraid</b>
                                            <a href="#cameraid">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>cameraid:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="date"></a>
                                        <span class="name "><b>date</b>
                                            <a href="#date">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>date:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="detected_timestamp"></a>
                                        <span class="name "><b>detected_timestamp</b>
                                            <a href="#detected_timestamp">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>detected_timestamp:     <code></code>
</code>
                                    </td>
                                </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="exit_timestamp"></a>
                                        <span class="name "><b>exit_timestamp</b>
                                            <a href="#exit_timestamp">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>exit_timestamp:     <code></code>
</code>
                                    </td>
                                </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="imagename"></a>
                                        <span class="name "><b>imagename</b>
                                            <a href="#imagename">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>imagename:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="roi_violation_name"></a>
                                        <span class="name "><b>roi_violation_name</b>
                                            <a href="#roi_violation_name">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>roi_violation_name:     <code></code>
</code>
                                    </td>
                                </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { Component, OnInit, ViewChild, TemplateRef, ElementRef, AfterViewInit, OnDestroy } from &#x27;@angular/core&#x27;;
import { FormControl, Validators } from &#x27;@angular/forms&#x27;;
import { ModalDismissReasons, NgbDate, NgbModal, NgbModalRef } from &#x27;@ng-bootstrap/ng-bootstrap&#x27;;
import { interval, Observable, of, TimeInterval, timer } from &#x27;rxjs&#x27;;
import { startWith, switchMap, timeout } from &#x27;rxjs/operators&#x27;;
import { ExcelsheetService } from &#x27;src/app/services/excelsheet.service&#x27;;
import { PdfService } from &#x27;src/app/services/pdf.service&#x27;;
import { WebServerService } from &#x27;src/app/services/web-server.service&#x27;;
import { environment } from &#x27;src/environments/environment&#x27;;

var data &#x3D; [{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south2&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;north2&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south3&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;north3&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south4&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;north4&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south5&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;north5&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south6&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;north6&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; },
{ imageURl: &#x27;https://images.hindustantimes.com/img/2021/09/13/550x309/6d190f42-14a3-11ec-a13e-d4a68f9db710_1631553930291.jpg&#x27;, camerName: &#x27;south7&#x27;, timeStamp: new Date().toLocaleString(), cameraid: &#x27;cam23&#x27; }
]

export interface violation {
  cameraid?: string,
  date?: string,
  imagename?: string,
  detected_timestamp?:Date[&quot;toLocaleString&quot;],
  exit_timestamp?:Date[&quot;toLocaleString&quot;],
  roi_violation_name?:&quot;string&quot;

}

@Component({
  selector: &#x27;app-perimeter&#x27;,
  templateUrl: &#x27;./perimeter.component.html&#x27;,
  styleUrls: [&#x27;./perimeter.component.css&#x27;]
})
export class PerimeterComponent implements OnInit, AfterViewInit, OnDestroy {
  from: NgbDate
  To: NgbDate
  data: violation[] &#x3D; []
  zoom &#x3D; 100
  imageUrl: string
  imgWidth: number &#x3D; 400
  imgheight: number &#x3D; 300
  closeResult: string;
  tempdata: any[] &#x3D; [];
  page: number &#x3D; 1
  pageSize: number &#x3D; 4
  collectionSize: number
  total: Observable&lt;number&gt; &#x3D; of(0)
  violData: Observable&lt;any[]&gt; &#x3D; of([])
  loading: boolean &#x3D; false
  filterOut: FormControl &#x3D; new FormControl()
  closeModal: any
  dataForExcel: any[] &#x3D; []
  images: any[] &#x3D; []
  ExcelData: any
  pdfLoader: boolean &#x3D; false
  excelLoader: boolean &#x3D; false
  violLength: number &#x3D; 0
  updatedLen: number &#x3D; 0
  violdata: any[] &#x3D; [];
  currentViol: violation
  dataForPdf:any[]
  show1:number&#x3D;2
  show2:number&#x3D;4
  show3:number&#x3D;6
  fromDate &#x3D; new FormControl(Validators.required)
  toDate &#x3D; new FormControl(Validators.required)
  updateTO:number
  isdatewise:boolean&#x3D;false
  API:any
  interval:any
  loader2:boolean&#x3D;false

  @ViewChild(&#x27;dangerAlert&#x27;) Violation: TemplateRef&lt;any&gt;;



  constructor(private modalService: NgbModal, private http: HttpClient, private excelSheet: ExcelsheetService, private pdfService: PdfService, private webServer: WebServerService) {
  this.API&#x3D;webServer.IP

  console.log(this.API)

    this.filterOut.valueChanges.pipe((startWith(&#x27;&#x27;),
      switchMap((text) &#x3D;&gt; this.matches(text)
      )
    )).subscribe(result &#x3D;&gt; {
      this.tempdata &#x3D; result
      this.violData &#x3D; of(result)
      this.sliceVD()
    }
    )

  }

  ngOnInit(): void {
    this.violLength &#x3D; Number(localStorage.getItem(&quot;updatedLen&quot;))
    console.log(Number(localStorage.getItem(&quot;updatedLen&quot;)))
    console.log(this.violLength)
   
    
     this.webServer.JSWViolData().subscribe((Rdata: any) &#x3D;&gt; {
     if (Rdata.success) {
        data &#x3D; Rdata.message
        console.log(Rdata.message)
       this.tempdata &#x3D; Rdata.message
       if(this.tempdata.length&gt;30){
        if(this.pageSize&lt;30){
          this.pageSize&#x3D;30
        this.show1&#x3D;15
        this.show2&#x3D;30
        this.show3&#x3D;40
        }
        else{
          this.pageSize&#x3D;this.pageSize
        }
      }
      if(this.tempdata.length&gt;&#x3D;400){
        if(this.pageSize&lt;60){
        this.pageSize&#x3D;60
        this.show1&#x3D;30
        this.show2&#x3D;50
        this.show3&#x3D;75
        }
        else{
          this.pageSize&#x3D;this.pageSize
        }
      }
        if(this.tempdata.length&gt;&#x3D;1000){
          if(this.pageSize&lt;90){
          this.pageSize&#x3D;100
          this.show1&#x3D;70
          this.show2&#x3D;100
          this.show3&#x3D;150
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
      }


      if(this.tempdata.length&gt;&#x3D;2000){
        if(this.pageSize&lt;150){
        this.pageSize&#x3D;200
        this.show1&#x3D;200
        this.show2&#x3D;300
        this.show3&#x3D;400
        }
        else{
          this.pageSize&#x3D;this.pageSize
        }
    }

    if(this.tempdata.length&gt;&#x3D;3000){
      if(this.pageSize&lt;250){
      this.pageSize&#x3D;300
      this.show1&#x3D;300
      this.show2&#x3D;400
      this.show3&#x3D; 500
      }
      else{
        this.pageSize&#x3D;this.pageSize
      }
  }
      this.total &#x3D; of(this.tempdata.length)
      this.violData&#x3D;of(Rdata.message)

       this.sliceVD()

     }
   })


  }


  //pop up for violation 
  ngAfterViewInit() {
    console.log(this.webServer.IP)
    // this.dataread()


  }






public dataread(){
  
 this.interval&#x3D; setInterval(() &#x3D;&gt; {
    if (Number(localStorage.getItem(&quot;updatedLen&quot;))) {
      this.violLength &#x3D; Number(localStorage.getItem(&quot;updatedLen&quot;))
    }
    this.webServer.JSWViolData().subscribe((Rdata: any) &#x3D;&gt; {
      if (Rdata.success) {
        //this.violdata &#x3D; []
       var cviol&#x3D;Rdata.message
        
       this.total &#x3D; of(this.violdata.length)
       this.loader2&#x3D;false
       this.isdatewise&#x3D;false
          this.violData &#x3D; of(Rdata.message)
       
        data &#x3D; Rdata.message
      //  console.log(Rdata.message)
       var data &#x3D; Rdata.message
        this.violdata&#x3D;Rdata.message
       this.tempdata&#x3D;this.violdata
        if(this.tempdata.length&gt;30){
          if(this.pageSize&lt;30){
            this.pageSize&#x3D;30
          this.show1&#x3D;15
          this.show2&#x3D;30
          this.show3&#x3D;40
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
        }
        if(this.tempdata.length&gt;&#x3D;400){
          if(this.pageSize&lt;60){
          this.pageSize&#x3D;60
          this.show1&#x3D;60
          this.show2&#x3D;70
          this.show3&#x3D;80
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
        }
          if(this.tempdata.length&gt;&#x3D;1000){
            if(this.pageSize&lt;90){
            this.pageSize&#x3D;100
            this.show1&#x3D;70
            this.show2&#x3D;100
            this.show3&#x3D;150
            }
            else{
              this.pageSize&#x3D;this.pageSize
            }
        }


        if(this.tempdata.length&gt;&#x3D;2000){
          if(this.pageSize&lt;150){
          this.pageSize&#x3D;200
          this.show1&#x3D;200
          this.show2&#x3D;300
          this.show3&#x3D;400
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
      }

      if(this.tempdata.length&gt;&#x3D;3000){
        if(this.pageSize&lt;300){
        this.pageSize&#x3D;300
        this.show1&#x3D;300
        this.show2&#x3D;350
        this.show3&#x3D;400
        }
        else{
          this.pageSize&#x3D;this.pageSize
        }
      }
       
          //console.log(this.violLength)
        localStorage.setItem(&quot;updatedLen&quot;, JSON.stringify(cviol.length))
        console.log(Number(localStorage.getItem(&quot;updatedLen&quot;)))

        //this.tempdata &#x3D; data
        this.sliceVD()
         if(Number(localStorage.getItem(&quot;updatedLen&quot;))&gt;this.violLength){
           this.violdata&#x3D;Rdata.message
           var diff&#x3D;(Number(localStorage.getItem(&quot;updatedLen&quot;))-this.violLength);
            console.log(diff)
        for (let i &#x3D; 0; i &lt; diff; i++) {
          
          //this.violdata.push(data[i])
         // console.log(this.violdata[i])
          this.showViol(this.Violation, this.violdata[i])
           }
           data&#x3D;this.violdata
         // console.log(this.violdata)
          this.tempdata &#x3D; this.violdata
          
          this.sliceVD()
        }
      }

    })
  }, 1000)
}


  //modal to view the image
  openImage(imageUrl: string, modal: any) {

    this.imageUrl &#x3D;this.API+&#x27;/image/&#x27;+ imageUrl
    // console.log(this.imageUrl)
    this.modalService.open(modal, { size: &#x27;lg&#x27;, windowClass: &#x27;custome&#x27;, centered: true }).result.then((result) &#x3D;&gt; {
      this.closeResult &#x3D; &#x60;Closed with: ${result}&#x60;;
    }, (reason) &#x3D;&gt; {
      this.closeResult &#x3D; &#x60;Dismissed ${this.getDismissReason(reason)}&#x60;;
    });

  }


  //MODAL FOR VIOLATION
  showViol(modal: any, currentViol: violation) {
    this.updateTO&#x3D;this.webServer.timeout
    this.currentViol &#x3D; currentViol
    var modal1 &#x3D; this.modalService.open(modal, { backdrop: false, windowClass: &#x27;modalViol&#x27;, centered: true });
    setTimeout(() &#x3D;&gt; {
      modal1.dismiss()

    }, this.updateTO);

  }




  private getDismissReason(reason: any): string {
    if (reason &#x3D;&#x3D;&#x3D; ModalDismissReasons.ESC) {
      this.zoom &#x3D; 100
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300

      return &#x27;by pressing ESC&#x27;;
    } else if (reason &#x3D;&#x3D;&#x3D; ModalDismissReasons.BACKDROP_CLICK) {
      this.zoom &#x3D; 100
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300
      return &#x27;by clicking on a backdrop&#x27;;
    } else {
      this.imgWidth &#x3D; 400
      this.imgheight &#x3D; 300
      this.zoom &#x3D; 100
      return &#x60;with: ${reason}&#x60;;
    }

  }

  matches(term: string): Observable&lt;any[]&gt; {
    var resultVD &#x3D; data.filter(viol &#x3D;&gt; {
      return (&lt;String&gt;viol.cameraid).includes(term)
    })

    this.tempdata &#x3D; resultVD
    const length &#x3D; resultVD.length;
    //this.total&#x3D;of(length)
    // resultDevices&#x3D;(resultDevices.map((div:any, SINo:number) &#x3D;&gt; ({id: SINo + 1, ...div})).slice((this.page - 1) * this.pageSize, (this.page - 1) * this.pageSize + this.pageSize));
    //  this.total&#x3D;of(resultDevices.length)
    this.sliceVD()


    return of(resultVD);


  }
  sliceVD() {

    // this.deviceResult.subscribe(data &#x3D;&gt; {
    //   this.temp &#x3D; data
    // })
    // if (!this.filterOut.value) {
    //   this.tempdata &#x3D; this.violdata
    // }

    this.total &#x3D; of((this.tempdata.slice((this.page - 1) * this.pageSize, (this.page - 1) * this.pageSize + this.pageSize)).length)
    this.total &#x3D; of(this.tempdata.length)
    this.violData &#x3D; of((this.tempdata.map((div: any, SINo: number) &#x3D;&gt; ({ id: SINo + 1, ...div })).slice((this.page - 1) * this.pageSize, (this.page - 1) * this.pageSize + this.pageSize)))



  }


  Submit() {
    this.loading &#x3D; true
    clearInterval(this.interval)
    this.webServer.JSWDatewise(this.fromDate.value ? this.fromDate.value : &#x27;&#x27;, this.toDate.value ? this.toDate.value : &#x27;&#x27;).subscribe((Response: any) &#x3D;&gt; {
      //console.log(Response)
      if (Response.success) {
       
        //console.log(Response.message)
        data&#x3D;Response.message
        this.tempdata &#x3D; data
        this.isdatewise&#x3D;true

        if(this.tempdata.length&gt;30){
          if(this.pageSize&lt;30){
            this.pageSize&#x3D;30
          this.show1&#x3D;15
          this.show2&#x3D;30
          this.show3&#x3D;40
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
        }
        if(this.tempdata.length&gt;&#x3D;400){
          if(this.pageSize&lt;60){
          this.pageSize&#x3D;60
          this.show1&#x3D;50
          this.show2&#x3D;60
          this.show3&#x3D;70
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
        }
          if(this.tempdata.length&gt;&#x3D;1000){
            if(this.pageSize&lt;100){
            this.pageSize&#x3D;100
            this.show1&#x3D;100
            this.show2&#x3D;150
            this.show3&#x3D;200
            }
            else{
              this.pageSize&#x3D;this.pageSize
            }
        }
  
  
        if(this.tempdata.length&gt;&#x3D;2000){
          if(this.pageSize&lt;150){
          this.pageSize&#x3D;200
          this.show1&#x3D;200
          this.show2&#x3D;250
          this.show3&#x3D;300
          }
          else{
            this.pageSize&#x3D;this.pageSize
          }
      }
      if(this.tempdata.length&gt;&#x3D;3000){
        if(this.pageSize&lt;300){
        this.pageSize&#x3D;300
        this.show1&#x3D;300
        this.show2&#x3D;350
        this.show3&#x3D;400
        }
        else{
          this.pageSize&#x3D;this.pageSize
        }
    }


        this.total &#x3D; of(this.tempdata.length)
        this.isdatewise&#x3D;true
        this.sliceVD()
      
        this.loading&#x3D;false
        
      }
      this.loading&#x3D;false
     
    })
    

  }

  BackToToday(){
    this.loader2&#x3D;true
  
  this.dataread()
  }

  downloadExcel() {
    // var Ddata&#x3D;data
    this.excelLoader &#x3D; true
    this.images &#x3D; []
    this.dataForExcel&#x3D;[]
   data.forEach((each: any) &#x3D;&gt; {
      this.dataForExcel.push([&#x27;--&#x27;, each.cameraid, each.detected_timestamp,each.exit_timestamp,each.roi_violation_name])
      this.images.push(each.imagename)

    })
   // console.log(this.images)

    var images: any[] &#x3D; []
    for (let i &#x3D; 0; i &lt; this.images.length; i++) {
      this.toBase64(this.API+&#x27;/image/&#x27;+this.images[i], function (base64) {
        images.push(base64)
        console.log(images)
      })

    }
    

     setTimeout(() &#x3D;&gt; {
       
     

      this.ExcelData &#x3D; {
        title: &#x27;Traffic Count Data&#x27;,
        data: this.dataForExcel,
        headers: [&quot;image&quot;, &quot;cameraid&quot;, &quot;detected timestamp&quot;,&quot;exit timestamp&quot;,&quot;ROI Name&quot;],
        // TDMCount: this.DM_TDM_Count,
        // testDriveCount: this.test_drive,
        images: images,
        // timespentzone:TSZString
      }
      console.log(images.length)
    }, 8000);
    



    

    setTimeout(() &#x3D;&gt; {
      
    

      this.excelSheet.exportExcel(this.ExcelData)
      this.excelLoader &#x3D; false
   
   

    }, 9000);

  }



  downloadPdf() {
    // var Ddata&#x3D;this.tempdata
    // console.log(Ddata)
    this.dataForPdf&#x3D;[]
    this.pdfLoader &#x3D; true
    var timeSpentInZone: any[] &#x3D; []
    this.images &#x3D; []
    data.forEach((each: any) &#x3D;&gt; {
      this.dataForPdf.push([&#x27;--&#x27;,each.cameraid,each.detected_timestamp,each.exit_timestamp,each.roi_violation_name])
      this.images.push(each.imagename)
      timeSpentInZone.push(each.total_time_spent_in_zone)


    })
    //console.log(this.dataForExcel)

    var images: any[] &#x3D; []
    console.log(this.images.length)
    for (let i &#x3D; 0; i &lt; this.images.length; i++) {
      this.toBase64(this.API+&#x27;/image/&#x27;+this.images[i], function (base64) {
        console.log(base64)
        images.push(base64)
        console.log(images)
      })

    }
    

setTimeout(() &#x3D;&gt; {
  

      this.ExcelData &#x3D; {
        title: &#x27;Violation Data&#x27;,
        data: this.dataForExcel,
        headers: [&quot;image&quot;, &quot;cameraid&quot;, &quot;detected timestamp&quot;,&quot;exit timestamp&quot;,&quot;ROI Name&quot;],
        // TDMCount: this.DM_TDM_Count,
        // testDriveCount: this.test_drive,
        images: images,
        timeSpentInZone: timeSpentInZone
        // timespentzone:TSZString
      }
      console.log(images.length)
    }, 9000);
 //console.log(this.ExcelData)


    

setTimeout(() &#x3D;&gt; {
  

      this.pdfService.createPdf(this.ExcelData)
      this.pdfLoader &#x3D; false
   

    }, 10000);

  }

 toBase64(url, callback) {
    var request &#x3D; new XMLHttpRequest()
    request.onload &#x3D; function () {
      var reader &#x3D; new FileReader()
      reader.onloadend &#x3D; function () {
        callback(reader.result)
      }
      reader.readAsDataURL(request.response)

    }
    request.open(&#x27;GET&#x27;, url)
    request.responseType &#x3D; &#x27;blob&#x27;
    request.send()

  }


  ngOnDestroy() {
    this.modalService.dismissAll()
    clearInterval(this.closeModal)
  }

}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'violation.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
